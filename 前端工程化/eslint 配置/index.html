<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css"><script class="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"baimohui.github.io",root:"/",images:"/images",scheme:"Muse",version:"8.2.1",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12},copycode:!1,bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:"valine",storage:!0,lazyload:!1,nav:null},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"fadeInDown",post_body:"fadeInDown",coll_header:"fadeInLeft",sidebar:"fadeInUp"}},prism:!1,i18n:{placeholder:"搜索...",empty:"没有找到任何搜索结果：${query}",hits_time:"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）",hits:"找到 ${hits} 个搜索结果"}}</script><meta name="description" content="在团队协作中，为避免低级 Bug、产出风格统一的代码，会预先制定编码规范。使用 Lint 工具和代码风格检测工具，则可以辅助编码规范执行，有效控制代码质量。"><meta property="og:type" content="article"><meta property="og:title" content="eslint 和 prettier 配置"><meta property="og:url" content="https://baimohui.github.io/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/eslint%20%E9%85%8D%E7%BD%AE/index.html"><meta property="og:site_name" content="白抹灰"><meta property="og:description" content="在团队协作中，为避免低级 Bug、产出风格统一的代码，会预先制定编码规范。使用 Lint 工具和代码风格检测工具，则可以辅助编码规范执行，有效控制代码质量。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2023-02-02T15:18:54.608Z"><meta property="article:modified_time" content="2023-02-02T15:18:54.608Z"><meta property="article:author" content="mohui"><meta property="article:tag" content="vscode"><meta property="article:tag" content="eslint"><meta property="article:tag" content="prettier"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://baimohui.github.io/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/eslint%20%E9%85%8D%E7%BD%AE/"><script class="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>eslint 和 prettier 配置 | 白抹灰</title><noscript><style>body{margin-top:2rem}.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header,.use-motion .sidebar{visibility:visible}.use-motion .footer,.use-motion .header,.use-motion .site-brand-container .toggle{opacity:initial}.use-motion .custom-logo-image,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line{transform:scaleX(1)}.search-pop-overlay,.sidebar-nav{display:none}.sidebar-panel{display:block}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">白抹灰</h1><i class="logo-line"></i></a></div><div class="site-nav-right"><div class="toggle popup-trigger"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li></ul></nav></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81eslint"><span class="nav-text">一、eslint</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5"><span class="nav-text">1. 项目引入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85"><span class="nav-text">2. 插件安装</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81prettier"><span class="nav-text">二、prettier</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5-1"><span class="nav-text">1. 项目引入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85-1"><span class="nav-text">2. 插件安装</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E8%A7%A3%E5%86%B3%E5%86%B2%E7%AA%81"><span class="nav-text">三、解决冲突</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Prettier-Eslint"><span class="nav-text">1. Prettier Eslint</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%B7%BB%E5%8A%A0-prettier-%E8%A7%84%E5%88%99%E5%88%B0-eslint-%E4%B8%AD"><span class="nav-text">2. 添加 prettier 规则到 eslint 中</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">mohui</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">81</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">23</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">77</span> <span class="site-state-item-name">标签</span></a></div></nav></div></div></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top" role="button"><i class="fa fa-arrow-up"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://baimohui.github.io/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/eslint%20%E9%85%8D%E7%BD%AE/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="mohui"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="白抹灰"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">eslint 和 prettier 配置</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2023-02-02 23:18:54" itemprop="dateCreated datePublished" datetime="2023-02-02T23:18:54+08:00">2023-02-02</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/eslint/" itemprop="url" rel="index"><span itemprop="name">eslint</span></a> </span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="far fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span></span></div><div class="post-meta"><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>6.4k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>6 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p>在团队协作中，为避免低级 Bug、产出风格统一的代码，会预先制定编码规范。使用 Lint 工具和代码风格检测工具，则可以辅助编码规范执行，有效控制代码质量。<a id="more"></a></p><h2 id="一、eslint"><a href="#一、eslint" class="headerlink" title="一、eslint"></a>一、eslint</h2><p>ESLint 由《JavaScript 红宝书》作者 Nicholas C. Zakas 编写，2013 年发布第一个版本。NCZ 的初衷不是重复造一个轮子，而是在实际需求得不到 JSHint 团队响应的情况下做出的选择：以可扩展、每条规则独立、不内置编码风格为理念编写一个 lint 工具。</p><h3 id="1-项目引入"><a href="#1-项目引入" class="headerlink" title="1. 项目引入"></a>1. 项目引入</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install eslint --save-dev</span><br><span class="line">npx eslint --init</span><br></pre></td></tr></table></figure><p>执行初始化命令后，项目会生成对应的.eslintrc.js 文件，用来对校验规则进行配置。另外，可以新建.eslintignore 文件，用来添加不受 eslint 检查的文件或目录。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="string">&quot;env&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;browser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;es2021&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;node&quot;</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;extends&quot;</span>: [</span><br><span class="line">        <span class="comment">//继承 Eslint 中推荐的（打钩的）规则项 http://eslint.cn/docs/rules/</span></span><br><span class="line">        <span class="string">&quot;eslint:recommended&quot;</span>,</span><br><span class="line">        <span class="comment">// 此项是用来配置 vue.js 风格</span></span><br><span class="line">        <span class="string">&quot;plugin:vue/essential&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;parserOptions&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;ecmaVersion&quot;</span>: <span class="number">13</span>,</span><br><span class="line">        <span class="string">&quot;sourceType&quot;</span>: <span class="string">&quot;module&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;vue&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;rules&quot;</span>: &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>extends 中的规则按排序先后执行。当其中不同配置项中的规则有重复时，默认后面的会替换前面的。rules 里可以配置自定义规则（<a target="_blank" rel="noopener" href="http://eslint.cn/docs/rules/">eslint 规则大全</a>），当和 extends 里的规则有重复时，会默认覆盖掉 extends 中的。</p><p>在项目根目录中执行：<code>npx eslint --ext .vue src/</code>，这样在运行检查时，如果有不符合规则的代码，则会出现对应的警告或报错。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npx eslint --ext .vue src&#x2F;</span><br><span class="line">等价于：.&#x2F;node_modules&#x2F;.bin&#x2F;eslint --ext .vue src&#x2F;</span><br><span class="line">--ext:可以指定在指定目录&#x2F;文件</span><br><span class="line">.vue：vue文件</span><br><span class="line">src&#x2F;：在src目录下匹配</span><br></pre></td></tr></table></figure><p>也可以在 package.json 的 script 中配置如下这些运行脚本，这样直接在根目录下执行 <code>npm run lint</code>便能检查代码是否规范。另外，运行<code>npm run lint-fix</code>可以自动修复不符合 eslint 规范的代码（只有官网上标有扳手图标的规则才会进行修复）。</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;lint&quot;: &quot;eslint --ext .js --ext .jsx --ext .vue src/&quot;,</span><br><span class="line">&quot;lint-fix&quot;: &quot;eslint --fix --ext .js --ext .jsx --ext .vue src/&quot;</span><br></pre></td></tr></table></figure><h3 id="2-插件安装"><a href="#2-插件安装" class="headerlink" title="2. 插件安装"></a>2. 插件安装</h3><p>输入命令才能检查代码是否规范的操作略显繁琐，我们可以在 vscode 上安装 eslint 插件来简化步骤。这个插件会自动检查你的代码是否符合规范，并且会在编辑器中标识出来哪里不符合，底下终端处还会罗列出问题列表。</p><p>安装完成后，打开 vscode 的 setting.json 配置文件，增加以下配置后重启 vscode，就能实现保存时自动按照规范修正代码。</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 配置保存时按照 eslint 文件的规则来处理一下代码</span></span><br><span class="line">&quot;editor.codeActionsOnSave&quot;: &#123;</span><br><span class="line">    &quot;source.fixAll&quot;: true,</span><br><span class="line">    &quot;eslint.autoFixOnSave&quot; : true,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h2 id="二、prettier"><a href="#二、prettier" class="headerlink" title="二、prettier"></a>二、prettier</h2><p>eslint 规范的是代码偏向语法层面上的风格。比如禁用 debugger，禁用稀疏数组等。</p><p>而有时候，我们写代码删删改改，或者是个人的代码习惯，就有可能出现这样的代码。也就是说，prettier 规范的是代码偏向于排版层面上的风格。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">	import HelloWorld from &#39;.&#x2F;components&#x2F;HelloWorld.vue&#39;;</span><br><span class="line">        export default &#123;</span><br><span class="line">                name: &#39;App&#39;,</span><br><span class="line">        components: &#123;</span><br><span class="line">    HelloWorld</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><h3 id="1-项目引入-1"><a href="#1-项目引入-1" class="headerlink" title="1. 项目引入"></a>1. 项目引入</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev --save-exact prettier</span><br><span class="line">npx prettier --write src&#x2F;</span><br></pre></td></tr></table></figure><p>安装完成后运行 <code>npx prettier --write src/</code> 就能格式化代码。可以在根目录新建 .prettierrc 的配置文件（格式为 json），或者 .prettierrc.js（则需要 module.export）。<br>附：<a target="_blank" rel="noopener" href="https://www.prettier.cn/docs/options.html">Prettier 规则集</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//此处的规则供参考，其中多半其实都是默认值，可以根据个人习惯改写</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    printWidth: <span class="number">80</span>, <span class="comment">//单行长度</span></span><br><span class="line">    tabWidth: <span class="number">2</span>, <span class="comment">//缩进长度</span></span><br><span class="line">    useTabs: <span class="literal">false</span>, <span class="comment">//使用空格代替 tab 缩进</span></span><br><span class="line">    semi: <span class="literal">false</span>, <span class="comment">//句末使用分号</span></span><br><span class="line">    singleQuote: <span class="literal">false</span>, <span class="comment">//使用单引号</span></span><br><span class="line">    arrowParens: <span class="string">&quot;avoid&quot;</span>,<span class="comment">//单参数箭头函数参数周围使用圆括号-eg: (x) =&gt; x avoid：省略括号</span></span><br><span class="line">    bracketSpacing: <span class="literal">true</span>,<span class="comment">//在对象前后添加空格-eg: &#123; foo: bar &#125;</span></span><br><span class="line">    insertPragma: <span class="literal">false</span>,<span class="comment">//在已被 prettier 格式化的文件顶部加上标注</span></span><br><span class="line">    jsxBracketSameLine: <span class="literal">false</span>,<span class="comment">//多属性 html 标签的‘&gt;’折行放置</span></span><br><span class="line">    rangeStart: <span class="number">0</span>,</span><br><span class="line">    requirePragma: <span class="literal">false</span>,<span class="comment">//无需顶部注释即可格式化</span></span><br><span class="line">    trailingComma: <span class="string">&quot;none&quot;</span>,<span class="comment">//多行时尽可能打印尾随逗号</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>到目前为止，对于 prettier，我们还无法查看哪里不符合规则，而只是通过自动修复来规范代码风格。如果要像 eslint 一样，会在代码底部出现红色波浪线提示，需要把 prettier 当成 eslint 的插件注入 eslint 中，让 eslint 来报这个错（实际上还是 vscode 的 eslint 插件实现的）。<br>首先需要安装 <code>eslint-plugin-prettier</code>包。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D eslint-plugin-prettier</span><br></pre></td></tr></table></figure><p>然后在.eslintrc.js 配置文件中添加这个配置，即通过 eslint 报 prettier 的错误：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .eslintrc.js</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;plugins&quot;</span>: [<span class="string">&quot;prettier&quot;</span>],</span><br><span class="line">  <span class="attr">&quot;rules&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;prettier/prettier&quot;</span>: <span class="string">&quot;error&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当项目没有配置 prettier，但需要美化代码时，可以在 setting.json 文件中配置 prettier 规则：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  prettier 的配置 */</span></span><br><span class="line"> &quot;prettier.printWidth&quot;: 80, // 超过最大值换行</span><br><span class="line"> &quot;prettier.tabWidth&quot;: 2, // 缩进字节数</span><br><span class="line"> &quot;prettier.useTabs&quot;: false, // 句尾添加分号</span><br><span class="line"> &quot;prettier.singleQuote&quot;: false, // 使用单引号代替双引号</span><br><span class="line"> &quot;prettier.proseWrap&quot;: &quot;preserve&quot;, //  (x) =&gt; &#123;&#125; 箭头函数参数只有一个时是否要有小括号。avoid：省略括号</span><br><span class="line"> &quot;prettier.bracketSpacing&quot;: true, // 在对象，数组括号与文字之间加空格 &quot;&#123; foo: bar &#125;&quot;</span><br><span class="line"> &quot;prettier.endOfLine&quot;: &quot;auto&quot;, // 结尾是 \n \r \n\r auto</span><br><span class="line"> &quot;prettier.eslintIntegration&quot;: false, //不让 prettier 使用 eslint 的代码格式进行校验</span><br><span class="line"> &quot;prettier.htmlWhitespaceSensitivity&quot;: &quot;ignore&quot;,</span><br><span class="line"> &quot;prettier.ignorePath&quot;: &quot;.prettierignore&quot;, // 不使用 prettier 格式化的文件填写在项目的.prettierignore 文件中</span><br><span class="line"> &quot;prettier.jsxBracketSameLine&quot;: false, // 在 jsx 中把&#x27;&gt;&#x27; 是否单独放一行</span><br><span class="line"> &quot;prettier.jsxSingleQuote&quot;: false, // 在 jsx 中使用单引号代替双引号</span><br><span class="line"> &quot;prettier.parser&quot;: &quot;babylon&quot;, // 格式化的解析器，默认是 babylon</span><br><span class="line"> &quot;prettier.requireConfig&quot;: false, // Require a &#x27;prettierconfig&#x27; to format prettier</span><br><span class="line"> &quot;prettier.stylelintIntegration&quot;: false, //不让 prettier 使用 stylelint 的代码格式进行校验</span><br><span class="line"> &quot;prettier.trailingComma&quot;: &quot;none&quot;, // 在对象或数组最后一个元素后面是否加逗号（在 ES5 中加尾逗号）</span><br><span class="line"> &quot;prettier.tslintIntegration&quot;: false,</span><br><span class="line"> &quot;prettier.arrowParens&quot;: &quot;avoid&quot;</span><br></pre></td></tr></table></figure><h3 id="2-插件安装-1"><a href="#2-插件安装-1" class="headerlink" title="2. 插件安装"></a>2. 插件安装</h3><p>同样，我们希望保存代码时能够自动格式化代码，于是又需要安装 Prettier - Code formatter 插件。安装完成后，在 setting.json 文件中添加如下配置：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//prettier 可以格式化很多种格式，所以需要在这里对应配置下</span></span><br><span class="line">&quot;[html]&quot;: &#123;</span><br><span class="line">     &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;</span><br><span class="line"> &#125;,</span><br><span class="line"> &quot;[css]&quot;: &#123;</span><br><span class="line">     &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;</span><br><span class="line"> &#125;,</span><br><span class="line"> &quot;[less]&quot;: &#123;</span><br><span class="line">     &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;</span><br><span class="line"> &#125;,</span><br><span class="line"> &quot;[vue]&quot;: &#123;</span><br><span class="line">     &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;</span><br><span class="line"> &#125;,</span><br><span class="line"> &quot;[javascript]&quot;: &#123;</span><br><span class="line">     &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;</span><br><span class="line"> &#125;,</span><br><span class="line"> &quot;[typescriptreact]&quot;: &#123;</span><br><span class="line">     &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;</span><br><span class="line"> &#125;,</span><br><span class="line"> &quot;[jsonc]&quot;: &#123;</span><br><span class="line">     &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;</span><br><span class="line"> &#125;,</span><br><span class="line"> &quot;[typescript]&quot;: &#123;</span><br><span class="line">     &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;</span><br><span class="line"> &#125;,</span><br><span class="line"> &quot;[json]&quot;: &#123;</span><br><span class="line">     &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="comment">//这个设置在 ctrl+s 的时候，会启用默认的格式化，这里是 prettier</span></span><br><span class="line"> &quot;editor.formatOnSave&quot;: true</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="三、解决冲突"><a href="#三、解决冲突" class="headerlink" title="三、解决冲突"></a>三、解决冲突</h2><p>在项目中同时配置 eslint 和 prettier，并都安装了对应的 vscode 插件后，两者可能会发生冲突。因为在默认情况下，保存代码时会先进行 eslint 的格式化，然后才是 prettier 的格式化。如果 eslint 和 prettier 的规则有不同，那么最后还是会按照 prettier 的规范进行格式化，从而导致无法通过 eslint 的校验。</p><h3 id="1-Prettier-Eslint"><a href="#1-Prettier-Eslint" class="headerlink" title="1. Prettier Eslint"></a>1. Prettier Eslint</h3><p>第一种解决方法是安装插件 Prettier Eslint，该 vscode 插件会默认先执行 prettier，而后再执行 eslint。所以当两者有规则冲突时，会由 eslint 来覆盖掉 prettier。</p><h3 id="2-添加-prettier-规则到-eslint-中"><a href="#2-添加-prettier-规则到-eslint-中" class="headerlink" title="2. 添加 prettier 规则到 eslint 中"></a>2. 添加 prettier 规则到 eslint 中</h3><p>首先需要安装解决冲突的依赖：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D eslint-config-prettier</span><br></pre></td></tr></table></figure><p>然后把 prettier 设置的规则添加到 extends 数组中。因为 extends 中后面的配置会默认覆盖掉前面的，所以就能让前面有冲突的 eslint 规则失效。</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">extends: [</span><br><span class="line">  &#x27;eslint:recommended&#x27;, //继承 Eslint 中推荐的（打钩的）规则项 http://eslint.cn/docs/rules/</span><br><span class="line">  &#x27;plugin:vue/essential&#x27;, // 此项是用来配置 vue.js 风格</span><br><span class="line">  &#x27;prettier&#x27;,//把 prettier 中设置的规则添加进来，让它覆盖上面设置的规则。这样就不会和上面的规则冲突了</span><br><span class="line">],</span><br></pre></td></tr></table></figure><blockquote><p>参考资料：<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42349568/article/details/121505460">eslint+prettier+husky 的配置说明</a></p></blockquote></div><footer class="post-footer"><div class="post-tags"><a href="/tags/vscode/" rel="tag"># vscode</a> <a href="/tags/eslint/" rel="tag"># eslint</a> <a href="/tags/prettier/" rel="tag"># prettier</a></div><div class="post-nav"><div class="post-nav-item"><a href="/%E5%89%8D%E7%AB%AF%E4%B8%89%E5%89%91%E5%AE%A2/JavaScript/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/" rel="prev" title="异步请求方法总结"><i class="fa fa-chevron-left"></i> 异步请求方法总结</a></div><div class="post-nav-item"><a href="/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/ES6%E5%92%8CCommonJS%E6%A8%A1%E5%9D%97/" rel="next" title="ES6 Module 和 CommonJS 模块的区别">ES6 Module 和 CommonJS 模块的区别 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script>window.addEventListener("tabs:register",()=>{let{activeClass:t}=CONFIG.comments;if(CONFIG.comments.storage&&(t=localStorage.getItem("comments_active")||t),t){const e=document.querySelector(`a[href="#comment-${t}"]`);e&&e.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{t.target.matches(".tabs-comment .tab-content .tab-pane")&&(t=t.target.classList[1],localStorage.setItem("comments_active",t))})</script></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">mohui</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span title="站点总字数">573k</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">8:41</span></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></footer><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html>